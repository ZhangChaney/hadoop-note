# 000-单机模式搭建

## 一、前提条件

准备好jdk和hadoop安装包

- jdk-8u261-linux-x64.tar.gz
- hadoop-3.1.3.tar.gz

并上传到服务器上的/opt/packages目录下，没有的同学先创建目录

## 二、安装jdk

### 1.创建modules目录

```shell
mkdir /opt/modules
```

### 2.解压JDK压缩包

```shell
cd /opt/packages
tar -zxvf jdk-8u261-linux-x64.tar.gz -C /opt/modules
# 修改文件目录
mv /opt/mudules/jdk1.8.0_261 /opt/mudules/jdk8
```

### 3.配置环境变量

```shell
vim /etc/profile
```

在文件最后追加以下内容，按i或者o开始输入

```shell
export JAVA_HOME=/opt/modules/jdk8
export PATH=$JAVA_HOME/bin:$PATH
```

按esc后输入:wq保存退出后执行

```shell
source /etc/profile
```

输入以下命令检查是否完成配置

```shell
java -version # 查看java版本
```

出现以下内容表示成功

```tex
java version "1.8.0_261"
Java(TM) SE Runtime Environment (build 1.8.0_261-b12)
Java HotSpot(TM) 64-Bit Server VM (build 25.261-b12, mixed mode)
```

## 三、安装hadoop

进入packages目录，解压hadoop

```shell
cd /opt/packages/
tar -zxvf hadoop-3.1.3.tar.gz -C /opt/modules/
ls /opt/modules  # 查看是否解压成功
# 出现以下内容表示正常
hadoop-3.1.3  jdk-1.8
```

配置hadoop环境变量

```shell
vim /etc/profile
```

在末尾追加以下内容

```shell
export HADOOP_HOME=/opt/modules/hadoop-3.1.3
export PATH=$HADOOP_HOME/bin:$HADOOP_HOME/sbin:$PATH
```

按esc后输入:wq保存退出后执行

```shell
source /etc/profile
```

命令行直接输入hadoop检查是否成功，出现以下内容表示正常

```tex
Usage: hadoop [OPTIONS] SUBCOMMAND [SUBCOMMAND OPTIONS]
 or    hadoop [OPTIONS] CLASSNAME [CLASSNAME OPTIONS]
  where CLASSNAME is a user-provided Java class
  ···
  ···
  ···
```

## 四、测试运行

创建data测试数据目录

```shell
mkdir /opt/data
cd /opt/data
touch wc.input
vim wc.input
```

在编辑器中数据测试数据（可以自行修改自定义）

```
a d b d
d h j k l o
c a b
a a a b j
```

按esc后输入:wq保存退出后进入hadoop目录运行测试用例

```shell
cd /opt/modules/hadoop-3.1.3

hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-3.1.3.jar wordcount /opt/data/wc.input /opt/data/wc.output
```

进入/opt/data下查看运行结果

```shell
cd /opt/data
ls  # 查看是否有一个wc.output文件夹，有的话进入查看结果，没有的话表示运行失败
```





